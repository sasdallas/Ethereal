"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[5685],{2746:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/EtherealScreenshot-6a2af68070403fa15024e84804bb4ce3.png"},3703:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"getting-started/boot-process","title":"Boot Process","description":"Ethereal\'s boot process is very intricate and involves some key components.","source":"@site/docs/getting-started/boot-process.md","sourceDirName":"getting-started","slug":"/getting-started/boot-process","permalink":"/docs/getting-started/boot-process","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Compilation","permalink":"/docs/getting-started/compilation"},"next":{"title":"Creating your first Driver","permalink":"/docs/category/creating-your-first-driver"}}');var i=t(4848),r=t(8453);const l={},d="Boot Process",a={},c=[{value:"Kernel",id:"kernel",level:2},{value:"Init",id:"init",level:2},{value:"Final launch targets",id:"final-launch-targets",level:2},{value:"Celestial",id:"celestial",level:3},{value:"termemu",id:"termemu",level:3},{value:"terminal",id:"terminal",level:3}];function o(e){const n={a:"a",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"boot-process",children:"Boot Process"})}),"\n",(0,i.jsx)(n.p,{children:"Ethereal's boot process is very intricate and involves some key components."}),"\n",(0,i.jsx)(n.h2,{id:"kernel",children:"Kernel"}),"\n",(0,i.jsxs)(n.p,{children:["The kernel of Ethereal is known as ",(0,i.jsx)(n.strong,{children:"Hexahedron"}),". It is a ",(0,i.jsx)(n.strong,{children:"modular"})," kernel with support for SMP, USB, networking, etc."]}),"\n",(0,i.jsx)(n.p,{children:"At boot, the startup screen is handled by Hexahedron (indicated by the cube in the upper right)."}),"\n",(0,i.jsxs)(n.p,{children:["There are ",(0,i.jsx)(n.strong,{children:"two stages of Hexahedron's boot process"})," - the ",(0,i.jsx)(n.strong,{children:"initial stage"})," and the ",(0,i.jsx)(n.strong,{children:"final stage"}),".",(0,i.jsx)(n.br,{}),"\n","The separation between the two stages is indicated by a ",(0,i.jsx)(n.strong,{children:"change in font by the kernel"})]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsx)(n.tr,{children:(0,i.jsx)(n.th,{style:{textAlign:"center"},children:(0,i.jsx)(n.img,{alt:"Hexahedron initial stage",src:t(8534).A+"",width:"1944",height:"1096"})})})}),(0,i.jsx)(n.tbody,{children:(0,i.jsx)(n.tr,{children:(0,i.jsx)(n.td,{style:{textAlign:"center"},children:(0,i.jsx)(n.em,{children:"Initial stage - ramdisk decompression"})})})})]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsx)(n.tr,{children:(0,i.jsx)(n.th,{style:{textAlign:"center"},children:(0,i.jsx)(n.img,{alt:"Hexahedron loading drivers",src:t(5750).A+"",width:"1918",height:"1093"})})})}),(0,i.jsx)(n.tbody,{children:(0,i.jsx)(n.tr,{children:(0,i.jsx)(n.td,{style:{textAlign:"center"},children:(0,i.jsx)(n.em,{children:"Final stage - driver loading and init running"})})})})]}),"\n",(0,i.jsx)(n.p,{children:"In the first stage:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Basic features are initialized, such as ",(0,i.jsx)(n.strong,{children:"ACPI"}),", ",(0,i.jsx)(n.strong,{children:"VFS"}),", ",(0,i.jsx)(n.strong,{children:"SMP"}),", etc."]}),"\n",(0,i.jsx)(n.li,{children:"All builtin filesystem drivers (RamFS, KernelFS, etc.) are initialized (along with socket drivers)"}),"\n",(0,i.jsx)(n.li,{children:"The initial ramdisk is mounted"}),"\n",(0,i.jsx)(n.li,{children:"The initial ramdisk is decompressed."}),"\n",(0,i.jsx)(n.li,{children:"The next font, kernel symbol map, etc. are loaded from the ramdisk"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"In the second stage:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The kernel processes and initializes all drivers"}),"\n",(0,i.jsx)(n.li,{children:"The process system is started, creating tasks"}),"\n",(0,i.jsx)(n.li,{children:"The init task is launched"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"init",children:"Init"}),"\n",(0,i.jsxs)(n.p,{children:["The init task is the first thing ran by the kernel. It is located at ",(0,i.jsx)(n.code,{children:"userspace/init/"})," in the source tree."]}),"\n",(0,i.jsxs)(n.p,{children:["Init runs all shell scripts from ",(0,i.jsx)(n.code,{children:"/etc/init.d/"}),", setting up the system for configuration"]}),"\n",(0,i.jsxs)(n.p,{children:["Finally, depending on parameters from ",(0,i.jsx)(n.code,{children:"/kernel/cmdline"}),", it launches one of ",(0,i.jsx)(n.strong,{children:"3 tasks"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"celestial"}),", the ",(0,i.jsx)(n.strong,{children:"main window server"})," (if no parameters are specified)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"termemu --fullscreen"}),", a ",(0,i.jsx)(n.strong,{children:"single-user terminal emulator"})," (if the parameter ",(0,i.jsx)(n.code,{children:"--single-user"})," is specified)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"terminal"}),", a ",(0,i.jsx)(n.strong,{children:"legacy fallback terminal emulator"})," (if the parameter ",(0,i.jsx)(n.code,{children:"--old-kernel-terminal"})," is specified)"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"final-launch-targets",children:"Final launch targets"}),"\n",(0,i.jsx)(n.h3,{id:"celestial",children:"Celestial"}),"\n",(0,i.jsxs)(n.p,{children:["Celestial is the main window server of Ethereal, discussed in detail ",(0,i.jsx)(n.a,{href:"/docs/intro",children:"here"})]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsx)(n.tr,{children:(0,i.jsx)(n.th,{style:{textAlign:"center"},children:(0,i.jsx)(n.img,{alt:"Ethereal screenshot",src:t(2746).A+"",width:"1921",height:"1080"})})})}),(0,i.jsx)(n.tbody,{children:(0,i.jsx)(n.tr,{children:(0,i.jsx)(n.td,{style:{textAlign:"center"},children:(0,i.jsx)(n.em,{children:"A screenshot of Celestial"})})})})]}),"\n",(0,i.jsx)(n.h3,{id:"termemu",children:"termemu"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"termemu"})," (or ",(0,i.jsx)(n.em,{children:"terminal emulator"}),") is the main terminal emulator in Ethereal.",(0,i.jsx)(n.br,{}),"\n","Some design inspiration for this was taken from ToaruOS - the terminal emulator can operate in both standalone and windowed modes."]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsx)(n.tr,{children:(0,i.jsx)(n.th,{style:{textAlign:"center"},children:(0,i.jsx)(n.img,{alt:"Terminal emulator",src:t(6065).A+"",width:"1914",height:"1092"})})})}),(0,i.jsx)(n.tbody,{children:(0,i.jsx)(n.tr,{children:(0,i.jsx)(n.td,{style:{textAlign:"center"},children:(0,i.jsx)(n.em,{children:"A screenshot of termemu running in fullscreen mode"})})})})]}),"\n",(0,i.jsx)(n.h3,{id:"terminal",children:"terminal"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.strong,{children:["You ",(0,i.jsx)(n.em,{children:"should not"})," use this interface. It has been deprecated for a very long time."]})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"terminal"})," was the original terminal emulator. More accurately, it just passes input from its subprocess to ",(0,i.jsx)(n.code,{children:"/device/kconsole"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},5750:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/HexahedronFinalStage-d7c75703493493926e5532d4f30463c2.png"},6065:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/TerminalEmulator-4c83dde8e1919be947e7c318d6122374.png"},8453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>d});var s=t(6540);const i={},r=s.createContext(i);function l(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),s.createElement(r.Provider,{value:n},e.children)}},8534:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/HexahedronDecompressingRamdisk-b1063384f70a09b6e9631866b5b5b729.png"}}]);